<!DOCTYPE HTML>
<!--
	Dimension by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Lastwar Toolbox</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
		<div id="wrapper">

			<!-- Header -->
			<header id="header">
				<div class="logo">
					<span class="icon" style="font-size: 2em;">ğŸ’€</span>
				</div>
				<div class="content">
					<div class="inner">
						<h1>Lastwar Toolbox</h1>
						<p>æœ€å¾Œçš„æˆ°çˆ­ è³½å­£å‡ç´šè¨ˆç®—</p>
					</div>
				</div>
				<nav>
					<ul>
						<li><a href="#s5">è³½å­£ 5</a></li>
						<li><a href="#s4">è³½å­£ 4</a></li>
						<li><a href="#s4-resistance">S4 æŠ—æ€§è¨ˆç®—</a></li>
						<li><a href="#s3">è³½å­£ 3</a></li>
						<li><a href="#s2">è³½å­£ 2</a></li>
						<!-- <li><a href="#about">About</a></li>
						<li><a href="#contact">Contact</a></li> -->
						<!-- å¦‚æœ‰éœ€è¦ï¼Œä¹Ÿå¯å°‡ä¸Šæ–¹é€£çµç§»è‡³æ­¤è™• -->
					</ul>
				</nav>
			</header>

			<!-- Main -->
			<div id="main">

				<!-- s2 å€å¡Šï¼šç†”çˆå‡ç´šæ™‚é–“è¨ˆç®— -->
				<article id="s2">
					<h2 class="major">ç†”çˆå‡ç´šæ™‚é–“è¨ˆç®— (S2)</h2>
					<form>
						<div id="s2-selects-container"></div>
						<div>
							<label>ä½ ç¾åœ¨æœ‰ï¼š
								<input type="text" id="s2-current-resource" placeholder="éˆ¦åˆé‡‘æ•¸é‡">
							</label>
						</div>
						<div>
							<label>é«˜æº«æº¶çˆä¸‹ä¸€ç´šç¸½å…±éœ€è¦ï¼š
								<input type="text" id="s2-needed-resource" placeholder="æ‰€éœ€éˆ¦åˆé‡‘">
							</label>
						</div>
						<button type="button" class="button primary" onclick="calculateS2Output()" style="margin-bottom:20px;">é–‹å§‹è¨ˆç®—</button>
						<div id="s2-total-output">æ¯å°æ™‚ç¸½ç”¢å‡º: 0</div>
						<div id="s2-difference">ä½ é‚„å·®ï¼š0</div>
						<div id="s2-time-needed">éœ€è¦ 0 å°æ™‚ 0 åˆ†é˜</div>
						<div id="s2-upgrade-time">é è¨ˆå¯å‡ç´šæ™‚é–“ï¼š</div>
					</form>
				</article>

				<!-- s3 å€å¡Šï¼šè©›å’’ç ”ç©¶æ‰€å‡ç´šæ™‚é–“è¨ˆç®— -->
				<article id="s3">
					<h2 class="major">è©›å’’ç ”ç©¶æ‰€å‡ç´šæ™‚é–“è¨ˆç®— (S3)</h2>
					<form>
						<div id="s3-selects-container"></div>
						<div>
							<label>ä½ ç¾åœ¨æœ‰ï¼š
								<input type="text" id="s3-current-resource" placeholder="è–æ°´æ•¸é‡">
							</label>
						</div>
						<div>
							<label>è©›å’’ç ”ç©¶æ‰€ä¸‹ä¸€ç´šç¸½å…±éœ€è¦ï¼š
								<input type="text" id="s3-needed-resource" placeholder="æ‰€éœ€è–æ°´">
							</label>
						</div>
						<button type="button" class="button primary"  onclick="calculateS3Output()" style="margin-bottom:20px;">é–‹å§‹è¨ˆç®—</button>
						<div id="s3-total-output">æ¯å°æ™‚ç¸½ç”¢å‡º: 0</div>
						<div id="s3-difference">ä½ é‚„å·®ï¼š0</div>
						<div id="s3-time-needed">éœ€è¦ 0 å°æ™‚ 0 åˆ†é˜</div>
						<div id="s3-upgrade-time">é è¨ˆå¯å‡ç´šæ™‚é–“ï¼š</div>
					</form>
				</article>

				<!-- s5 å€å¡Šï¼šå’–å•¡å› ç ”ç©¶æ‰€å‡ç´šæ™‚é–“è¨ˆç®— -->
				<article id="s5">
					<h2 class="major">å’–å•¡å› ç ”ç©¶æ‰€å‡ç´šæ™‚é–“è¨ˆç®— (S5)</h2>
					<form>
						<div id="s5-selects-container"></div>
						<div>
							<label>ä½ ç¾åœ¨æœ‰ï¼š
								<input type="text" id="s5-current-resource" placeholder="å’–å•¡æ•¸é‡">
							</label>
						</div>
						<div>
							<label>å’–å•¡å› ç ”ç©¶æ‰€ä¸‹ä¸€ç´šç¸½å…±éœ€è¦ï¼š
								<input type="text" id="s5-needed-resource" placeholder="æ‰€éœ€å’–å•¡">
							</label>
						</div>
						<button type="button" class="button primary"  onclick="calculateS5Output()" style="margin-bottom:20px;">é–‹å§‹è¨ˆç®—</button>
						<div id="s5-total-output">æ¯å°æ™‚ç¸½ç”¢å‡º: 0</div>
						<div id="s5-difference">ä½ é‚„å·®ï¼š0</div>
						<div id="s5-time-needed">éœ€è¦ 0 å°æ™‚ 0 åˆ†é˜</div>
						<div id="s5-upgrade-time">é è¨ˆå¯å‡ç´šæ™‚é–“ï¼š</div>
					</form>
				</article>

				<!-- s4 å€å¡Šï¼šå…‰é›»ç ”ç©¶æ‰€å‡ç´šæ™‚é–“è¨ˆç®— -->
				<article id="s4">
					<h2 class="major">å…‰é›»ç ”ç©¶æ‰€å‡ç´šæ™‚é–“è¨ˆç®— (S4)</h2>
					<form>
						<div id="s4-selects-container"></div>
						<div>
							<label>ä½ ç¾åœ¨æœ‰ï¼š
								<input type="text" id="s4-current-resource" placeholder="çŸ³è‹±æ•¸é‡">
							</label>
						</div>
						<div>
							<label>å…‰é›»ç ”ç©¶æ‰€ä¸‹ä¸€ç´šç¸½å…±éœ€è¦ï¼š
								<input type="text" id="s4-needed-resource" placeholder="æ‰€éœ€çŸ³è‹±">
							</label>
						</div>
						<button type="button" class="button primary"  onclick="calculateS4Output()" style="margin-bottom:20px;">é–‹å§‹è¨ˆç®—</button>
						<div id="s4-total-output">æ¯å°æ™‚ç¸½ç”¢å‡º: 0</div>
						<div id="s4-difference">ä½ é‚„å·®ï¼š0</div>
						<div id="s4-time-needed">éœ€è¦ 0 å°æ™‚ 0 åˆ†é˜</div>
						<div id="s4-upgrade-time">é è¨ˆå¯å‡ç´šæ™‚é–“ï¼š</div>
					</form>
				</article>

				<!-- s4 æŠ—æ€§è¨ˆç®—å™¨ï¼Œ5-7 æŠ—æ€§ä¸ç¢ºå®š -->
				<article id="s4-resistance">
					<h2 class="major">S4 æŠ—æ€§è¨ˆç®—æ©Ÿ</h2>
					<form method="post" action="#">
						<div class="fields">
							<div class="field">
								<label for="research-level">å…‰é›»ç ”ç©¶æ‰€ç­‰ç´š</label>
								<select id="research-level" name="research-level">
									<option value="">é¸æ“‡ç­‰ç´š</option>
									<option value="1">ç­‰ç´š 1 (100 æŠ—æ€§)</option>
									<option value="2">ç­‰ç´š 2 (200 æŠ—æ€§)</option>
									<option value="3">ç­‰ç´š 3 (300 æŠ—æ€§)</option>
									<option value="4">ç­‰ç´š 4 (400 æŠ—æ€§)</option>
									<option value="5">ç­‰ç´š 5 (500 æŠ—æ€§)</option>
									<option value="6">ç­‰ç´š 6 (750 æŠ—æ€§)</option>
									<option value="7">ç­‰ç´š 7 (1000 æŠ—æ€§)</option>
									<option value="8">ç­‰ç´š 8 (1250 æŠ—æ€§)</option>
									<option value="9">ç­‰ç´š 9 (1500 æŠ—æ€§)</option>
									<option value="10">ç­‰ç´š 10 (1750 æŠ—æ€§)</option>
									<option value="11">ç­‰ç´š 11 (2000 æŠ—æ€§)</option>
									<option value="12">ç­‰ç´š 12 (2250 æŠ—æ€§)</option>
									<option value="13">ç­‰ç´š 13 (2500 æŠ—æ€§)</option>
									<option value="14">ç­‰ç´š 14 (2750 æŠ—æ€§)</option>
									<option value="15">ç­‰ç´š 15 (3000 æŠ—æ€§)</option>
									<option value="16">ç­‰ç´š 16 (3400 æŠ—æ€§)</option>
									<option value="17">ç­‰ç´š 17 (3800 æŠ—æ€§)</option>
									<option value="18">ç­‰ç´š 18 (4200 æŠ—æ€§)</option>
									<option value="19">ç­‰ç´š 19 (4600 æŠ—æ€§)</option>
									<option value="20">ç­‰ç´š 20 (5000 æŠ—æ€§)</option>
									<option value="21">ç­‰ç´š 21 (5500 æŠ—æ€§)</option>
									<option value="22">ç­‰ç´š 22 (6000 æŠ—æ€§)</option>
									<option value="23">ç­‰ç´š 23 (6500 æŠ—æ€§)</option>
									<option value="24">ç­‰ç´š 24 (7000 æŠ—æ€§)</option>
									<option value="25">ç­‰ç´š 25 (7500 æŠ—æ€§)</option>
									<option value="26">ç­‰ç´š 26 (8000 æŠ—æ€§)</option>
									<option value="27">ç­‰ç´š 27 (8500 æŠ—æ€§)</option>
									<option value="28">ç­‰ç´š 28 (9000 æŠ—æ€§)</option>
									<option value="29">ç­‰ç´š 29 (9500 æŠ—æ€§)</option>
									<option value="30">ç­‰ç´š 30 (10000 æŠ—æ€§)</option>
								</select>
							</div>
							<div class="field">
								<label for="l-buff">ç‡ˆå¡”äº®åº¦</label>
								<select id="l-buff" name="l-buff">
									<option value="0">L0 (+0 æŠ—æ€§)</option>
									<option value="1">L1 (+50 æŠ—æ€§)</option>
									<option value="2">L2 (+150 æŠ—æ€§)</option>
									<option value="3">L3/4 (+250 æŠ—æ€§)</option>
								</select>
							</div>
							<div class="field half">
								<input type="checkbox" id="weekly-card-buff" name="weekly-card-buff">
								<label for="weekly-card-buff">é€±å¡ (+250 æŠ—æ€§)</label>
							</div>
							<div class="field half">
								<input type="checkbox" id="guardian-buff" name="guardian-buff">
								<label for="guardian-buff">å®ˆè­·è€… (+250 æŠ—æ€§)</label>
							</div>
							<div class="field half">
								<input type="checkbox" id="card-skill-buff" name="card-skill-buff">
								<label for="card-skill-buff">å¡ç‰ŒæŠ€èƒ½ (+250 æŠ—æ€§)</label>
							</div>
						</div>
						<ul class="actions">
							<li><input type="button" value="è¨ˆç®—ç¸½æŠ—æ€§" class="primary" onclick="calculateResistance()" /></li>
						</ul>
						<div id="base-resistance" style="margin-bottom: 10px;">åŸºç¤æŠ—æ€§: 0</div>
						<div id="buff-details" style="margin-bottom: 10px;">Buff è©³æƒ…: </div>
						<div id="total-resistance" style="font-size: 1.2em; font-weight: bold; color: #ff6b6b;">ç¸½æŠ—æ€§: 0</div>
					</form>
				</article>

				<!-- Elements -->
				<article id="elements">
					<h2 class="major">Elements</h2>

					<section>
						<h3 class="major">Text</h3>
						<p>This is <b>bold</b> and this is <strong>strong</strong>. This is <i>italic</i> and this is <em>emphasized</em>.
						This is <sup>superscript</sup> text and this is <sub>subscript</sub> text.
						This is <u>underlined</u> and this is code: <code>for (;;) { ... }</code>. Finally, <a href="#">this is a link</a>.</p>
						<hr />
						<h2>Heading Level 2</h2>
						<h3>Heading Level 3</h3>
						<h4>Heading Level 4</h4>
						<h5>Heading Level 5</h5>
						<h6>Heading Level 6</h6>
						<hr />
						<h4>Blockquote</h4>
						<blockquote>Fringilla nisl. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan faucibus. Vestibulum ante ipsum primis in faucibus lorem ipsum dolor sit amet nullam adipiscing eu felis.</blockquote>
						<h4>Preformatted</h4>
						<pre><code>i = 0;

				while (!deck.isInOrder()) {
				print 'Iteration ' + i;
				deck.shuffle();
				i++;
				}

				print 'It took ' + i + ' iterations to sort the deck.';</code></pre>
					</section>

					<section>
						<h3 class="major">Lists</h3>

						<h4>Unordered</h4>
						<ul>
							<li>Dolor pulvinar etiam.</li>
							<li>Sagittis adipiscing.</li>
							<li>Felis enim feugiat.</li>
						</ul>

						<h4>Alternate</h4>
						<ul class="alt">
							<li>Dolor pulvinar etiam.</li>
							<li>Sagittis adipiscing.</li>
							<li>Felis enim feugiat.</li>
						</ul>

						<h4>Ordered</h4>
						<ol>
							<li>Dolor pulvinar etiam.</li>
							<li>Etiam vel felis viverra.</li>
							<li>Felis enim feugiat.</li>
							<li>Dolor pulvinar etiam.</li>
							<li>Etiam vel felis lorem.</li>
							<li>Felis enim et feugiat.</li>
						</ol>
						<h4>Icons</h4>
						<ul class="icons">
							<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
							<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
							<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
							<li><a href="#" class="icon brands fa-github"><span class="label">Github</span></a></li>
						</ul>

						<h4>Actions</h4>
						<ul class="actions">
							<li><a href="#" class="button primary">Default</a></li>
							<li><a href="#" class="button">Default</a></li>
						</ul>
						<ul class="actions stacked">
							<li><a href="#" class="button primary">Default</a></li>
							<li><a href="#" class="button">Default</a></li>
						</ul>
					</section>

					<section>
						<h3 class="major">Table</h3>
						<h4>Default</h4>
						<div class="table-wrapper">
							<table>
								<thead>
									<tr>
										<th>Name</th>
										<th>Description</th>
										<th>Price</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>Item One</td>
										<td>Ante turpis integer aliquet porttitor.</td>
										<td>29.99</td>
									</tr>
									<tr>
										<td>Item Two</td>
										<td>Vis ac commodo adipiscing arcu aliquet.</td>
										<td>19.99</td>
									</tr>
									<tr>
										<td>Item Three</td>
										<td> Morbi faucibus arcu accumsan lorem.</td>
										<td>29.99</td>
									</tr>
									<tr>
										<td>Item Four</td>
										<td>Vitae integer tempus condimentum.</td>
										<td>19.99</td>
									</tr>
									<tr>
										<td>Item Five</td>
										<td>Ante turpis integer aliquet porttitor.</td>
										<td>29.99</td>
									</tr>
								</tbody>
								<tfoot>
									<tr>
										<td colspan="2"></td>
										<td>100.00</td>
									</tr>
								</tfoot>
							</table>
						</div>

						<h4>Alternate</h4>
						<div class="table-wrapper">
							<table class="alt">
								<thead>
									<tr>
										<th>Name</th>
										<th>Description</th>
										<th>Price</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>Item One</td>
										<td>Ante turpis integer aliquet porttitor.</td>
										<td>29.99</td>
									</tr>
									<tr>
										<td>Item Two</td>
										<td>Vis ac commodo adipiscing arcu aliquet.</td>
										<td>19.99</td>
									</tr>
									<tr>
										<td>Item Three</td>
										<td> Morbi faucibus arcu accumsan lorem.</td>
										<td>29.99</td>
									</tr>
									<tr>
										<td>Item Four</td>
										<td>Vitae integer tempus condimentum.</td>
										<td>19.99</td>
									</tr>
									<tr>
										<td>Item Five</td>
										<td>Ante turpis integer aliquet porttitor.</td>
										<td>29.99</td>
									</tr>
								</tbody>
								<tfoot>
									<tr>
										<td colspan="2"></td>
										<td>100.00</td>
									</tr>
								</tfoot>
							</table>
						</div>
					</section>

					<section>
						<h3 class="major">Buttons</h3>
						<ul class="actions">
							<li><a href="#" class="button primary">Primary</a></li>
							<li><a href="#" class="button">Default</a></li>
						</ul>
						<ul class="actions">
							<li><a href="#" class="button">Default</a></li>
							<li><a href="#" class="button small">Small</a></li>
						</ul>
						<ul class="actions">
							<li><a href="#" class="button primary icon solid fa-download">Icon</a></li>
							<li><a href="#" class="button icon solid fa-download">Icon</a></li>
						</ul>
						<ul class="actions">
							<li><span class="button primary disabled">Disabled</span></li>
							<li><span class="button disabled">Disabled</span></li>
						</ul>
					</section>

					<section>
						<h3 class="major">Form</h3>
						<form method="post" action="#">
							<div class="fields">
								<div class="field half">
									<label for="demo-name">Name</label>
									<input type="text" name="demo-name" id="demo-name" value="" placeholder="Jane Doe" />
								</div>
								<div class="field half">
									<label for="demo-email">Email</label>
									<input type="email" name="demo-email" id="demo-email" value="" placeholder="jane@untitled.tld" />
								</div>
								<div class="field">
									<label for="demo-category">Category</label>
									<select name="demo-category" id="demo-category">
										<option value="">-</option>
										<option value="1">Manufacturing</option>
										<option value="1">Shipping</option>
										<option value="1">Administration</option>
										<option value="1">Human Resources</option>
									</select>
								</div>
								<div class="field half">
									<input type="radio" id="demo-priority-low" name="demo-priority" checked>
									<label for="demo-priority-low">Low</label>
								</div>
								<div class="field half">
									<input type="radio" id="demo-priority-high" name="demo-priority">
									<label for="demo-priority-high">High</label>
								</div>
								<div class="field half">
									<input type="checkbox" id="demo-copy" name="demo-copy">
									<label for="demo-copy">Email me a copy</label>
								</div>
								<div class="field half">
									<input type="checkbox" id="demo-human" name="demo-human" checked>
									<label for="demo-human">Not a robot</label>
								</div>
								<div class="field">
									<label for="demo-message">Message</label>
									<textarea name="demo-message" id="demo-message" placeholder="Enter your message" rows="6"></textarea>
								</div>
							</div>
							<ul class="actions">
								<li><input type="submit" value="Send Message" class="primary" /></li>
								<li><input type="reset" value="Reset" /></li>
							</ul>
						</form>
					</section>

				</article>

			</div>

			<!-- Footer -->
			<footer id="footer">
				<p class="copyright">&copy; #188 [MQM]TWWlst Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
			</footer>

		</div>

		<!-- BG -->
		<div id="bg"></div>

		<!-- Scripts -->
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/util.js"></script>
		<script src="assets/js/main.js"></script>
		<!-- ä»¥ä¸‹ç‚ºåˆä½µå¾Œçš„è¨ˆç®—å™¨ script -->
		<script>
			// çµ±ä¸€ä½¿ç”¨çš„ç”Ÿç”¢æ•¸æ“š
			const levelOutput = [
				{ level: 0, output: 0 },
				{ level: 1, output: 720 },
				{ level: 2, output: 1440 },
				{ level: 3, output: 2160 },
				{ level: 4, output: 2880 },
				{ level: 5, output: 3600 },
				{ level: 6, output: 4320 },
				{ level: 7, output: 5040 },
				{ level: 8, output: 5760 },
				{ level: 9, output: 6480 },
				{ level: 10, output: 7200 },
				{ level: 11, output: 7920 },
				{ level: 12, output: 8640 },
				{ level: 13, output: 9360 },
				{ level: 14, output: 10080 },
				{ level: 15, output: 10800 },
				{ level: 16, output: 11520 },
				{ level: 17, output: 12240 },
				{ level: 18, output: 12960 },
				{ level: 19, output: 13680 },
				{ level: 20, output: 14400 },
				{ level: 21, output: 15120 },
				{ level: 22, output: 15840 },
				{ level: 23, output: 16560 },
				{ level: 24, output: 17280 },
				{ level: 25, output: 18000 },
				{ level: 26, output: 18720 },
				{ level: 27, output: 19440 },
				{ level: 28, output: 20160 },
				{ level: 29, output: 20880 },
				{ level: 30, output: 21600 },
				{ level: 31, output: 22320 },
				{ level: 32, output: 23040 },
				{ level: 33, output: 23760 },
				{ level: 34, output: 24480 },
				{ level: 35, output: 25200 }
			];

			// ============ è³‡æ–™ä¿å­˜å’Œè¼‰å…¥åŠŸèƒ½ ============

			// ä¿å­˜è³‡æ–™åˆ° localStorage
			function saveData(season, data) {
				localStorage.setItem(`lastwar-toolbox-${season}`, JSON.stringify(data));
			}

			// å¾ localStorage è¼‰å…¥è³‡æ–™
			function loadData(season) {
				const saved = localStorage.getItem(`lastwar-toolbox-${season}`);
				return saved ? JSON.parse(saved) : null;
			}

			// é€šç”¨ä¿å­˜å‡½å¼
			function saveFormData(season) {
				const data = {
					factories: {},
					currentResource: document.getElementById(`${season}-current-resource`).value,
					neededResource: document.getElementById(`${season}-needed-resource`).value
				};

				for (let i = 1; i <= 5; i++) {
					const select = document.getElementById(`${season}-factory${i}`);
					data.factories[`factory${i}`] = select.value;
				}

				saveData(season, data);
			}

			// é€šç”¨è¼‰å…¥å‡½å¼
			function loadFormData(season) {
				const data = loadData(season);
				if (data) {
					// è¼‰å…¥å·¥å» ç­‰ç´š
					for (let i = 1; i <= 5; i++) {
						const select = document.getElementById(`${season}-factory${i}`);
						if (data.factories && data.factories[`factory${i}`]) {
							select.value = data.factories[`factory${i}`];
						}
					}

					// è¼‰å…¥è³‡æºæ•¸é‡
					if (data.currentResource) {
						document.getElementById(`${season}-current-resource`).value = data.currentResource;
					}
					if (data.neededResource) {
						document.getElementById(`${season}-needed-resource`).value = data.neededResource;
					}
				}
			}

			// ç‚ºæ‰€æœ‰è¼¸å…¥æ¬„ä½æ·»åŠ è‡ªå‹•ä¿å­˜åŠŸèƒ½
			function addAutoSave(season) {
				// å·¥å» ä¸‹æ‹‰é¸å–®è‡ªå‹•ä¿å­˜
				for (let i = 1; i <= 5; i++) {
					const select = document.getElementById(`${season}-factory${i}`);
					select.addEventListener('change', () => saveFormData(season));
				}

				// è³‡æºè¼¸å…¥æ¬„ä½è‡ªå‹•ä¿å­˜
				const currentInput = document.getElementById(`${season}-current-resource`);
				const neededInput = document.getElementById(`${season}-needed-resource`);
				
				currentInput.addEventListener('input', () => saveFormData(season));
				neededInput.addEventListener('input', () => saveFormData(season));
			}

			// ç‚ºè¼¸å…¥æ¬„ä½æ·»åŠ  Enter éµè§¸ç™¼è¨ˆç®—åŠŸèƒ½
			function addEnterKeyListener(season) {
				const currentInput = document.getElementById(`${season}-current-resource`);
				const neededInput = document.getElementById(`${season}-needed-resource`);
				
				const handleEnterKey = (event) => {
					if (event.key === 'Enter') {
						event.preventDefault();
						// æ ¹æ“šä¸åŒè³½å­£å‘¼å«å°æ‡‰çš„è¨ˆç®—å‡½å¼
						if (season === 's2') {
							calculateS2Output();
						} else if (season === 's3') {
							calculateS3Output();
						} else if (season === 's4') {
							calculateS4Output();
						} else if (season === 's5') {
							calculateS5Output();
						}
					}
				};
				
				currentInput.addEventListener('keydown', handleEnterKey);
				neededInput.addEventListener('keydown', handleEnterKey);
			}

			// ============ s2 è¨ˆç®—å™¨ ============

			// åˆå§‹åŒ– s2 çš„ä¸‹æ‹‰é¸å–®
			function initS2() {
				const container = document.getElementById('s2-selects-container');
				for (let i = 1; i <= 5; i++) {
					const label = document.createElement('label');
					label.className = 'factory-label';
					label.textContent = `éˆ¦åˆé‡‘å·¥å» ${i}ï¼š`;
					const select = document.createElement('select');
					select.id = `s2-factory${i}`;
					select.name = `s2-factory${i}`;
					select.options.add(new Option('é¸æ“‡ç­‰ç´š', ''));
					levelOutput.forEach(item => {
						select.options.add(new Option(`ç­‰ç´š ${item.level}`, item.level));
					});
					container.appendChild(label);
					container.appendChild(select);
					container.appendChild(document.createElement('br'));
				}
				
				// è¼‰å…¥ä¹‹å‰ä¿å­˜çš„è³‡æ–™
				loadFormData('s2');
				// æ·»åŠ è‡ªå‹•ä¿å­˜åŠŸèƒ½
				addAutoSave('s2');
				// æ·»åŠ  Enter éµè§¸ç™¼è¨ˆç®—åŠŸèƒ½
				addEnterKeyListener('s2');
			}

			// s2 çš„è¨ˆç®—å‡½å¼
			function calculateS2Output() {
				let total = 0;
				for (let i = 1; i <= 5; i++) {
					const select = document.getElementById(`s2-factory${i}`);
					const level = parseInt(select.value);
					const item = levelOutput.find(item => item.level === level);
					const output = item ? item.output : 0;
					total += output;
				}
				document.getElementById('s2-total-output').textContent = `æ¯å°æ™‚ç¸½ç”¢å‡º: ${total}`;

				const current = parseInt(document.getElementById('s2-current-resource').value) || 0;
				const needed = parseInt(document.getElementById('s2-needed-resource').value) || 0;
				const difference = needed - current;
				document.getElementById('s2-difference').textContent = `ä½ é‚„å·®ï¼š${difference}`;

				// é¿å…é™¤ä»¥ 0
				if (total <= 0) {
					document.getElementById('s2-time-needed').textContent = `ç„¡æ³•è¨ˆç®—æ™‚é–“ (ç”¢å‡ºç‚º 0)`;
					document.getElementById('s2-upgrade-time').textContent = `é è¨ˆå¯å‡ç´šæ™‚é–“ï¼šç„¡æ³•è¨ˆç®—`;
					return;
				}

				const hoursNeeded = difference / total;
				const hours = Math.floor(hoursNeeded);
				const minutes = Math.round((hoursNeeded - hours) * 60);
				document.getElementById('s2-time-needed').textContent = `éœ€è¦ ${hours} å°æ™‚ ${minutes} åˆ†é˜`;

				const upgradeTime = new Date(Date.now() + hoursNeeded * 3600000);
				document.getElementById('s2-upgrade-time').textContent = `é è¨ˆå¯å‡ç´šæ™‚é–“ï¼š${upgradeTime.toLocaleString()}`;
				
				// ä¿å­˜è³‡æ–™
				saveFormData('s2');
			}

			// ============ s3 è¨ˆç®—å™¨ ============

			// åˆå§‹åŒ– s3 çš„ä¸‹æ‹‰é¸å–®
			function initS3() {
				const container = document.getElementById('s3-selects-container');
				for (let i = 1; i <= 5; i++) {
					const label = document.createElement('label');
					label.className = 'factory-label';
					label.textContent = `ç¥ç¦ä¹‹æ³‰${i}ï¼š`;
					const select = document.createElement('select');
					select.id = `s3-factory${i}`;
					select.name = `s3-factory${i}`;
					select.options.add(new Option('é¸æ“‡ç­‰ç´š', ''));
					levelOutput.forEach(item => {
						select.options.add(new Option(`ç­‰ç´š ${item.level}`, item.level));
					});
					container.appendChild(label);
					container.appendChild(select);
					container.appendChild(document.createElement('br'));
				}
				
				// è¼‰å…¥ä¹‹å‰ä¿å­˜çš„è³‡æ–™
				loadFormData('s3');
				// æ·»åŠ è‡ªå‹•ä¿å­˜åŠŸèƒ½
				addAutoSave('s3');
				// æ·»åŠ  Enter éµè§¸ç™¼è¨ˆç®—åŠŸèƒ½
				addEnterKeyListener('s3');
			}

			// s3 çš„è¨ˆç®—å‡½å¼
			function calculateS3Output() {
				let total = 0;
				for (let i = 1; i <= 5; i++) {
					const select = document.getElementById(`s3-factory${i}`);
					const level = parseInt(select.value);
					const item = levelOutput.find(item => item.level === level);
					const output = item ? item.output : 0;
					total += output;
				}
				document.getElementById('s3-total-output').textContent = `æ¯å°æ™‚ç¸½ç”¢å‡º: ${total}`;

				const current = parseInt(document.getElementById('s3-current-resource').value) || 0;
				const needed = parseInt(document.getElementById('s3-needed-resource').value) || 0;
				const difference = needed - current;
				document.getElementById('s3-difference').textContent = `ä½ é‚„å·®ï¼š${difference}`;

				if (total <= 0) {
					document.getElementById('s3-time-needed').textContent = `ç„¡æ³•è¨ˆç®—æ™‚é–“ (ç”¢å‡ºç‚º 0)`;
					document.getElementById('s3-upgrade-time').textContent = `é è¨ˆå¯å‡ç´šæ™‚é–“ï¼šç„¡æ³•è¨ˆç®—`;
					return;
				}

				const hoursNeeded = difference / total;
				const hours = Math.floor(hoursNeeded);
				const minutes = Math.round((hoursNeeded - hours) * 60);
				document.getElementById('s3-time-needed').textContent = `éœ€è¦ ${hours} å°æ™‚ ${minutes} åˆ†é˜`;

				const upgradeTime = new Date(Date.now() + hoursNeeded * 3600000);
				document.getElementById('s3-upgrade-time').textContent = `é è¨ˆå¯å‡ç´šæ™‚é–“ï¼š${upgradeTime.toLocaleString()}`;
				
				// ä¿å­˜è³‡æ–™
				saveFormData('s3');
			}

			// ============ s4 è¨ˆç®—å™¨ ============

			// åˆå§‹åŒ– s4 çš„ä¸‹æ‹‰é¸å–®
			function initS4() {
				const container = document.getElementById('s4-selects-container');
				for (let i = 1; i <= 5; i++) {
					const label = document.createElement('label');
					label.className = 'factory-label';
					label.textContent = `çŸ³è‹±å·¥åŠ${i}ï¼š`;
					const select = document.createElement('select');
					select.id = `s4-factory${i}`;
					select.name = `s4-factory${i}`;
					select.options.add(new Option('é¸æ“‡ç­‰ç´š', ''));
					levelOutput.forEach(item => {
						select.options.add(new Option(`ç­‰ç´š ${item.level}`, item.level));
					});
					container.appendChild(label);
					container.appendChild(select);
					container.appendChild(document.createElement('br'));
				}
				
				// è¼‰å…¥ä¹‹å‰ä¿å­˜çš„è³‡æ–™
				loadFormData('s4');
				// æ·»åŠ è‡ªå‹•ä¿å­˜åŠŸèƒ½
				addAutoSave('s4');
				// æ·»åŠ  Enter éµè§¸ç™¼è¨ˆç®—åŠŸèƒ½
				addEnterKeyListener('s4');
			}

			// s4 çš„è¨ˆç®—å‡½å¼
			function calculateS4Output() {
				let total = 0;
				for (let i = 1; i <= 5; i++) {
					const select = document.getElementById(`s4-factory${i}`);
					const level = parseInt(select.value);
					const item = levelOutput.find(item => item.level === level);
					const output = item ? item.output : 0;
					total += output;
				}
				document.getElementById('s4-total-output').textContent = `æ¯å°æ™‚ç¸½ç”¢å‡º: ${total}`;

				const current = parseInt(document.getElementById('s4-current-resource').value) || 0;
				const needed = parseInt(document.getElementById('s4-needed-resource').value) || 0;
				const difference = needed - current;
				document.getElementById('s4-difference').textContent = `ä½ é‚„å·®ï¼š${difference}`;

				if (total <= 0) {
					document.getElementById('s4-time-needed').textContent = `ç„¡æ³•è¨ˆç®—æ™‚é–“ (ç”¢å‡ºç‚º 0)`;
					document.getElementById('s4-upgrade-time').textContent = `é è¨ˆå¯å‡ç´šæ™‚é–“ï¼šç„¡æ³•è¨ˆç®—`;
					return;
				}

				const hoursNeeded = difference / total;
				const hours = Math.floor(hoursNeeded);
				const minutes = Math.round((hoursNeeded - hours) * 60);
				document.getElementById('s4-time-needed').textContent = `éœ€è¦ ${hours} å°æ™‚ ${minutes} åˆ†é˜`;

				const upgradeTime = new Date(Date.now() + hoursNeeded * 3600000);
				document.getElementById('s4-upgrade-time').textContent = `é è¨ˆå¯å‡ç´šæ™‚é–“ï¼š${upgradeTime.toLocaleString()}`;
				
				// ä¿å­˜è³‡æ–™
				saveFormData('s4');
			}

			// ============ s5 è¨ˆç®—å™¨ ============

			// åˆå§‹åŒ– s5 çš„ä¸‹æ‹‰é¸å–®
			function initS5() {
				const container = document.getElementById('s5-selects-container');
				for (let i = 1; i <= 5; i++) {
					const label = document.createElement('label');
					label.className = 'factory-label';
					label.textContent = `å’–å•¡å·¥åŠ${i}ï¼š`;
					const select = document.createElement('select');
					select.id = `s5-factory${i}`;
					select.name = `s5-factory${i}`;
					select.options.add(new Option('é¸æ“‡ç­‰ç´š', ''));
					levelOutput.forEach(item => {
						select.options.add(new Option(`ç­‰ç´š ${item.level}`, item.level));
					});
					container.appendChild(label);
					container.appendChild(select);
					container.appendChild(document.createElement('br'));
				}
				
				// è¼‰å…¥ä¹‹å‰ä¿å­˜çš„è³‡æ–™
				loadFormData('s5');
				// æ·»åŠ è‡ªå‹•ä¿å­˜åŠŸèƒ½
				addAutoSave('s5');
				// æ·»åŠ  Enter éµè§¸ç™¼è¨ˆç®—åŠŸèƒ½
				addEnterKeyListener('s5');
			}

			// s5 çš„è¨ˆç®—å‡½å¼
			function calculateS5Output() {
				let total = 0;
				for (let i = 1; i <= 5; i++) {
					const select = document.getElementById(`s5-factory${i}`);
					const level = parseInt(select.value);
					const item = levelOutput.find(item => item.level === level);
					const output = item ? item.output : 0;
					total += output;
				}
				document.getElementById('s5-total-output').textContent = `æ¯å°æ™‚ç¸½ç”¢å‡º: ${total}`;

				const current = parseInt(document.getElementById('s5-current-resource').value) || 0;
				const needed = parseInt(document.getElementById('s5-needed-resource').value) || 0;
				const difference = needed - current;
				document.getElementById('s5-difference').textContent = `ä½ é‚„å·®ï¼š${difference}`;

				if (total <= 0) {
					document.getElementById('s5-time-needed').textContent = `ç„¡æ³•è¨ˆç®—æ™‚é–“ (ç”¢å‡ºç‚º 0)`;
					document.getElementById('s5-upgrade-time').textContent = `é è¨ˆå¯å‡ç´šæ™‚é–“ï¼šç„¡æ³•è¨ˆç®—`;
					return;
				}

				const hoursNeeded = difference / total;
				const hours = Math.floor(hoursNeeded);
				const minutes = Math.round((hoursNeeded - hours) * 60);
				document.getElementById('s5-time-needed').textContent = `éœ€è¦ ${hours} å°æ™‚ ${minutes} åˆ†é˜`;

				const upgradeTime = new Date(Date.now() + hoursNeeded * 3600000);
				document.getElementById('s5-upgrade-time').textContent = `é è¨ˆå¯å‡ç´šæ™‚é–“ï¼š${upgradeTime.toLocaleString()}`;
				
				// ä¿å­˜è³‡æ–™
				saveFormData('s5');
			}

			// ============ S4 æŠ—æ€§è¨ˆç®—å™¨ ============

			// æŠ—æ€§æ•¸æ“š
			const resistanceData = [
				{ level: 1, resistance: 100 },
				{ level: 2, resistance: 200 },
				{ level: 3, resistance: 300 },
				{ level: 4, resistance: 400 },
				{ level: 5, resistance: 500 },
				{ level: 6, resistance: 750 },
				{ level: 7, resistance: 1000 },
				{ level: 8, resistance: 1250 },
				{ level: 9, resistance: 1500 },
				{ level: 10, resistance: 1750 },
				{ level: 11, resistance: 2000 },
				{ level: 12, resistance: 2250 },
				{ level: 13, resistance: 2500 },
				{ level: 14, resistance: 2750 },
				{ level: 15, resistance: 3000 },
				{ level: 16, resistance: 3400 },
				{ level: 17, resistance: 3800 },
				{ level: 18, resistance: 4200 },
				{ level: 19, resistance: 4600 },
				{ level: 20, resistance: 5000 },
				{ level: 21, resistance: 5500 },
				{ level: 22, resistance: 6000 },
				{ level: 23, resistance: 6500 },
				{ level: 24, resistance: 7000 },
				{ level: 25, resistance: 7500 },
				{ level: 26, resistance: 8000 },
				{ level: 27, resistance: 8500 },
				{ level: 28, resistance: 9000 },
				{ level: 29, resistance: 9500 },
				{ level: 30, resistance: 10000 }
			];

			// L Buff æŠ—æ€§æ•¸æ“š
			const lBuffResistance = [0, 50, 150, 250]; // L0, L1, L2, L3/4

			// æŠ—æ€§è¨ˆç®—å‡½å¼
			function calculateResistance() {
				// å–å¾—åŸºç¤æŠ—æ€§
				const researchLevel = parseInt(document.getElementById('research-level').value) || 0;
				const researchData = resistanceData.find(item => item.level === researchLevel);
				const baseResistance = researchData ? researchData.resistance : 0;

				// å–å¾—å„ç¨® buff
				const weeklyCardBuff = document.getElementById('weekly-card-buff').checked ? 250 : 0;
				const lBuffLevel = parseInt(document.getElementById('l-buff').value) || 0;
				const lBuffBonus = lBuffResistance[lBuffLevel] || 0;
				const guardianBuff = document.getElementById('guardian-buff').checked ? 250 : 0;
				const cardSkillBuff = document.getElementById('card-skill-buff').checked ? 250 : 0;

				// è¨ˆç®—ç¸½æŠ—æ€§
				const totalResistance = baseResistance + weeklyCardBuff + lBuffBonus + guardianBuff + cardSkillBuff;

				// é¡¯ç¤ºçµæœ
				document.getElementById('base-resistance').textContent = `åŸºç¤æŠ—æ€§: ${baseResistance}`;
				
				// é¡¯ç¤º buff è©³æƒ…
				const buffDetails = [];
				if (weeklyCardBuff > 0) buffDetails.push(`é€±å¡: +${weeklyCardBuff}`);
				if (lBuffBonus > 0) buffDetails.push(`L${lBuffLevel}: +${lBuffBonus}`);
				if (guardianBuff > 0) buffDetails.push(`å®ˆè­·è€…: +${guardianBuff}`);
				if (cardSkillBuff > 0) buffDetails.push(`å¡ç‰ŒæŠ€èƒ½: +${cardSkillBuff}`);
				
				const buffText = buffDetails.length > 0 ? buffDetails.join(', ') : 'ç„¡é¡å¤– Buff';
				document.getElementById('buff-details').textContent = `Buff è©³æƒ…: ${buffText}`;
				
				document.getElementById('total-resistance').textContent = `ç¸½æŠ—æ€§: ${totalResistance}`;

				// ä¿å­˜æŠ—æ€§è¨ˆç®—å™¨è³‡æ–™
				saveResistanceData();
			}

			// ä¿å­˜æŠ—æ€§è¨ˆç®—å™¨è³‡æ–™
			function saveResistanceData() {
				const data = {
					researchLevel: document.getElementById('research-level').value,
					weeklyCardBuff: document.getElementById('weekly-card-buff').checked,
					lBuff: document.getElementById('l-buff').value,
					guardianBuff: document.getElementById('guardian-buff').checked,
					cardSkillBuff: document.getElementById('card-skill-buff').checked
				};
				saveData('s4-resistance', data);
			}

			// è¼‰å…¥æŠ—æ€§è¨ˆç®—å™¨è³‡æ–™
			function loadResistanceData() {
				const data = loadData('s4-resistance');
				if (data) {
					if (data.researchLevel) {
						document.getElementById('research-level').value = data.researchLevel;
					}
					if (data.weeklyCardBuff !== undefined) {
						document.getElementById('weekly-card-buff').checked = data.weeklyCardBuff;
					}
					if (data.lBuff !== undefined) {
						document.getElementById('l-buff').value = data.lBuff;
					}
					if (data.guardianBuff !== undefined) {
						document.getElementById('guardian-buff').checked = data.guardianBuff;
					}
					if (data.cardSkillBuff !== undefined) {
						document.getElementById('card-skill-buff').checked = data.cardSkillBuff;
					}
				}
			}

			// åˆå§‹åŒ–æŠ—æ€§è¨ˆç®—å™¨
			function initResistanceCalculator() {
				// è¼‰å…¥ä¹‹å‰ä¿å­˜çš„è³‡æ–™
				loadResistanceData();
				
				// æ·»åŠ è‡ªå‹•ä¿å­˜å’Œè¨ˆç®—åŠŸèƒ½
				document.getElementById('research-level').addEventListener('change', () => {
					calculateResistance();
				});
				document.getElementById('weekly-card-buff').addEventListener('change', () => {
					calculateResistance();
				});
				document.getElementById('l-buff').addEventListener('change', () => {
					calculateResistance();
				});
				document.getElementById('guardian-buff').addEventListener('change', () => {
					calculateResistance();
				});
				document.getElementById('card-skill-buff').addEventListener('change', () => {
					calculateResistance();
				});
			}

			// åˆå§‹åŒ–æ‰€æœ‰è¨ˆç®—å™¨
			document.addEventListener('DOMContentLoaded', function () {
				initS2();
				initS3();
				initS4();
				initS5();
				initResistanceCalculator();
			});
		</script>
	</body>
</html>
